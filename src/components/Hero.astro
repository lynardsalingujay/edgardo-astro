---
import { downloadStrapiImage, type HeroSection } from "../lib/strapi";

interface Props {
  heroData: HeroSection | null;
}

const { heroData } = Astro.props;

// Debug: Check what data we received
if (import.meta.env.DEV) {
  console.log(
    "Hero component received heroData:",
    JSON.stringify(heroData, null, 2)
  );
}

// Use Strapi data if available, otherwise use fallback defaults
const heroTitle = heroData?.heroTitle || "Delicious Food, Made Fresh Daily";
const heroSubtitle =
  heroData?.heroSubtitle ||
  "Experience the finest culinary creations. We bring authentic flavors and quality ingredients to every dish we serve.";
const heroImage = heroData?.heroImage;
const primaryCtaText = heroData?.primaryCtaText || "View Menu";
const primaryCtaLink = heroData?.primaryCtaLink || "#menu";
const secondaryCtaText = heroData?.secondaryCtaText || "Order Now";
const secondaryCtaLink = heroData?.secondaryCtaLink || "#contact";

// Download image at build time and get local path
const imageUrl = await downloadStrapiImage(heroImage?.data?.attributes?.url);
const imageAlt = heroImage?.data?.attributes?.alternativeText || heroTitle;
---

<section
  class="relative bg-gradient-to-br from-background to-accent-50 py-20 sm:py-32"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto text-center">
      <h1
        class="text-5xl sm:text-6xl lg:text-7xl font-serif font-bold mb-6 leading-tight tracking-wide"
      >
        <span class="text-primary-700">{heroTitle}</span>
      </h1>

      <p class="text-xl text-text-dark mb-8 leading-relaxed">
        {heroSubtitle}
      </p>

      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        {
          primaryCtaText && primaryCtaLink && (
            <a
              href={primaryCtaLink}
              class="bg-secondary-600 hover:bg-secondary-700 text-white px-8 py-4 rounded-full font-semibold text-lg transition-all duration-300 inline-flex items-center gap-2 shadow-warm-lg hover:shadow-warm-xl hover:translate-y-[-2px]"
            >
              {primaryCtaText}
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
          )
        }

        {
          secondaryCtaText && secondaryCtaLink && (
            <a
              href={secondaryCtaLink}
              class="bg-transparent hover:bg-accent-50 text-accent-600 hover:text-accent-700 px-8 py-4 rounded-full font-semibold text-lg border-2 border-accent-600 hover:border-accent-700 transition-all duration-300 inline-block"
            >
              {secondaryCtaText}
            </a>
          )
        }
      </div>
    </div>
  </div>
</section>
